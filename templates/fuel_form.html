<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>{% if log %}Edit Fuel Log{% else %}Add Fuel Log{% endif %} - AutoLog</title>
	<script src="https://cdn.tailwindcss.com"></script>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
	<style>
		body {
			font-family: 'Inter', sans-serif;
		}

		.glass-panel {
			background: rgba(31, 41, 55, 0.7);
			backdrop-filter: blur(10px);
			border: 1px solid rgba(255, 255, 255, 0.1);
		}
	</style>
</head>

<body class="bg-gray-950 text-gray-100 min-h-screen flex items-center justify-center p-4">

	<!-- Background Decoration -->
	<div class="fixed inset-0 overflow-hidden pointer-events-none">
		<div class="absolute -top-24 -left-24 w-96 h-96 bg-blue-600/20 rounded-full blur-3xl"></div>
		<div class="absolute -bottom-24 -right-24 w-96 h-96 bg-yellow-600/20 rounded-full blur-3xl"></div>
	</div>

	<div class="w-full max-w-lg relative z-10">
		<div class="text-center mb-8">
			<div
				class="inline-flex items-center justify-center w-16 h-16 bg-blue-600 rounded-full mb-4 shadow-lg shadow-blue-900/50">
				<svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
						d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
				</svg>
			</div>
			<h1 class="text-3xl font-bold tracking-tight">{% if log %}Edit Fuel Log{% else %}Add Fuel Log{% endif %}
			</h1>
			<p class="text-gray-400 mt-2">For {{ vehicle.name }}</p>
		</div>

		<div class="glass-panel rounded-2xl p-8 shadow-2xl">
			{% with messages = get_flashed_messages(with_categories=true) %}
			{% if messages %}
			<div class="mb-6 space-y-2">
				{% for category, message in messages %}
				<div
					class="px-4 py-3 rounded-lg text-sm font-medium flex items-center gap-2 {% if category == 'success' %}bg-green-500/10 text-green-400 border border-green-500/20{% elif category == 'danger' %}bg-red-500/10 text-red-400 border border-red-500/20{% else %}bg-blue-500/10 text-blue-400 border border-blue-500/20{% endif %}">
					{{ message }}
				</div>
				{% endfor %}
			</div>
			{% endif %}
			{% endwith %}

			<form method="POST"
				action="{% if log %}{{ url_for('fuel.edit_fuel_log', vehicle_id=vehicle.id, log_id=log.id) }}{% else %}{{ url_for('fuel.add_fuel_log', vehicle_id=vehicle.id) }}{% endif %}"
				class="space-y-6">
				<div>
					<label for="log_date" class="block text-sm font-medium text-gray-300 mb-2">Date</label>
					<input type="date" name="log_date" id="log_date" required
						class="w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-white placeholder-gray-500 transition-all"
						value="{{ log.log_date.strftime('%Y-%m-%d') if log else '' }}">
				</div>

				<div>
					<label for="odometer" class="block text-sm font-medium text-gray-300 mb-2">Odometer Reading
						(km)</label>
					<input type="number" step="0.1" name="odometer" id="odometer" required
						class="w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-white placeholder-gray-500 transition-all"
						value="{{ log.odometer if log else '' }}" placeholder="e.g. 15000">
				</div>

				<div class="grid grid-cols-2 gap-4">
					<div>
						<label for="fuel_used" class="block text-sm font-medium text-gray-300 mb-2">Fuel Used
							(L)</label>
						<input type="number" step="0.01" name="fuel_used" id="fuel_used" required
							class="w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-white placeholder-gray-500 transition-all"
							value="{{ log.fuel_used if log else '' }}" placeholder="e.g. 45.5">
					</div>
					<div>
						<label for="fuel_price" class="block text-sm font-medium text-gray-300 mb-2">Price per
							Liter</label>
						<input type="number" step="0.01" name="fuel_price" id="fuel_price" required
							class="w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-white placeholder-gray-500 transition-all"
							value="{{ log.fuel_price if log else '' }}" placeholder="e.g. 1.50">
					</div>
				</div>

				<div class="pt-4 flex gap-4">
					<a href="{{ url_for('dashboard.dashboard', vehicle_id=vehicle.id) }}"
						class="w-1/3 text-center py-3 px-4 bg-gray-800 hover:bg-gray-700 text-gray-300 font-semibold rounded-xl transition-all">
						Cancel
					</a>
					<button type="submit"
						class="w-2/3 bg-blue-600 hover:bg-blue-500 text-white font-semibold py-3 rounded-xl shadow-lg shadow-blue-900/30 transition-all transform hover:-translate-y-0.5">
						{% if log %}Update Log{% else %}Save Log{% endif %}
					</button>
				</div>
			</form>
		</div>
	</div>
</body>

</html>