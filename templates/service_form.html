<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>{% if log %}Edit Service Log{% else %}Add Service Log{% endif %} - AutoLog</title>
	<script src="https://cdn.tailwindcss.com"></script>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
	<style>
		body {
			font-family: 'Inter', sans-serif;
		}

		.glass-panel {
			background: rgba(31, 41, 55, 0.7);
			backdrop-filter: blur(10px);
			border: 1px solid rgba(255, 255, 255, 0.1);
		}
	</style>
</head>

<body class="bg-gray-950 text-gray-100 min-h-screen flex items-center justify-center p-4">

	<!-- Background Decoration -->
	<div class="fixed inset-0 overflow-hidden pointer-events-none">
		<div class="absolute -top-24 -left-24 w-96 h-96 bg-green-600/20 rounded-full blur-3xl"></div>
		<div class="absolute -bottom-24 -right-24 w-96 h-96 bg-blue-600/20 rounded-full blur-3xl"></div>
	</div>

	<div class="w-full max-w-lg relative z-10">
		<div class="text-center mb-8">
			<div
				class="inline-flex items-center justify-center w-16 h-16 bg-green-600 rounded-full mb-4 shadow-lg shadow-green-900/50">
				<svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
						d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z">
					</path>
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
						d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
				</svg>
			</div>
			<h1 class="text-3xl font-bold tracking-tight">{% if log %}Edit Service Log{% else %}Add Service Log{% endif
				%}</h1>
			<p class="text-gray-400 mt-2">For {{ vehicle.name }}</p>
		</div>

		<div class="glass-panel rounded-2xl p-8 shadow-2xl">
			{% with messages = get_flashed_messages(with_categories=true) %}
			{% if messages %}
			<div class="mb-6 space-y-2">
				{% for category, message in messages %}
				<div
					class="px-4 py-3 rounded-lg text-sm font-medium flex items-center gap-2 {% if category == 'success' %}bg-green-500/10 text-green-400 border border-green-500/20{% elif category == 'danger' %}bg-red-500/10 text-red-400 border border-red-500/20{% else %}bg-blue-500/10 text-blue-400 border border-blue-500/20{% endif %}">
					{{ message }}
				</div>
				{% endfor %}
			</div>
			{% endif %}
			{% endwith %}

			<form method="POST"
				action="{% if log %}{{ url_for('service.edit_service_log', vehicle_id=vehicle.id, log_id=log.id) }}{% else %}{{ url_for('service.add_service', vehicle_id=vehicle.id) }}{% endif %}"
				class="space-y-6">
				<div>
					<label for="service_date" class="block text-sm font-medium text-gray-300 mb-2">Service Date</label>
					<input type="date" name="service_date" id="service_date" required
						class="w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent text-white placeholder-gray-500 transition-all"
						value="{{ log.service_date.strftime('%Y-%m-%d') if log else '' }}">
				</div>

				<div class="grid grid-cols-2 gap-4">
					<div>
						<label for="service_type" class="block text-sm font-medium text-gray-300 mb-2">Service
							Type</label>
						<input type="text" name="service_type" id="service_type" required
							class="w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent text-white placeholder-gray-500 transition-all"
							value="{{ log.service_type if log else '' }}" placeholder="e.g. Oil Change">
					</div>
					<div>
						<label for="cost" class="block text-sm font-medium text-gray-300 mb-2">Cost</label>
						<input type="number" step="0.01" name="cost" id="cost" required
							class="w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent text-white placeholder-gray-500 transition-all"
							value="{{ log.cost if log else '' }}" placeholder="e.g. 120.00">
					</div>
				</div>

				<div>
					<label for="notes" class="block text-sm font-medium text-gray-300 mb-2">Notes (Optional)</label>
					<textarea name="notes" id="notes" rows="3"
						class="w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent text-white placeholder-gray-500 transition-all"
						placeholder="Additional details about the service...">{{ log.notes if log and log.notes else '' }}</textarea>
				</div>

				<div class="pt-4 flex gap-4">
					<a href="{{ url_for('dashboard.dashboard', vehicle_id=vehicle.id) }}"
						class="w-1/3 text-center py-3 px-4 bg-gray-800 hover:bg-gray-700 text-gray-300 font-semibold rounded-xl transition-all">
						Cancel
					</a>
					<button type="submit"
						class="w-2/3 bg-green-600 hover:bg-green-500 text-white font-semibold py-3 rounded-xl shadow-lg shadow-green-900/30 transition-all transform hover:-translate-y-0.5">
						{% if log %}Update Log{% else %}Save Log{% endif %}
					</button>
				</div>
			</form>
		</div>
	</div>
</body>

</html>